import{r as n,j as e,G as C,R as E,c as S}from"./ResultView-KbLL5_eE.js";const R=()=>{const[l,s]=n.useState("idle"),[d,i]=n.useState(null),[p,a]=n.useState(null),[o,x]=n.useState(null),[b,c]=n.useState(!1),h=n.useRef(null),j=t=>{t.preventDefault(),t.stopPropagation(),c(!0)},v=t=>{t.preventDefault(),t.stopPropagation(),c(!1)},w=t=>{t.preventDefault(),t.stopPropagation()},N=t=>{t.preventDefault(),t.stopPropagation(),c(!1);const r=t.dataTransfer.files;r&&r.length>0&&u(r[0])},k=t=>{const r=t.target.files;r&&r.length>0&&u(r[0])},u=t=>{if(!t.type.startsWith("image/")){a("Please drop an image file"),s("error");return}const r=new FileReader;r.onload=L=>{var f;const m=(f=L.target)==null?void 0:f.result;x(m),y(m)},r.readAsDataURL(t)},y=t=>{s("analyzing"),a(null),i(null),chrome.runtime.sendMessage({type:"REQUEST_ANALYSIS",url:t},r=>{chrome.runtime.lastError?(a(chrome.runtime.lastError.message||"Analysis failed"),s("error")):r.error?(a(r.error),s("error")):(i(r),s("result"))})},D=()=>{s("idle"),i(null),a(null),x(null)};return e.jsx("div",{className:"w-[320px] h-auto min-h-[400px] flex flex-col bg-[#0d1117] bg-gradient-to-b from-[#1a1c22] to-[#0d1117] text-white p-2",children:e.jsxs(C,{className:"flex-1 relative flex flex-col px-4 pt-2 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 flex items-center justify-center border border-white/10",children:e.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center translate-y-[-0.5px]",children:[e.jsx("h2",{className:"text-lg font-semibold leading-none m-0 tracking-tight",children:"UnDiffused"}),e.jsx("p",{className:"text-[9px] text-white/40 tracking-[0.2em] uppercase mt-[3px] leading-none",children:"AI Image Detector"})]}),l!=="idle"&&e.jsx("button",{onClick:D,className:"absolute top-2 right-2 w-7 h-7 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-all duration-300 hover:rotate-90 border border-white/5 active:scale-95 shadow-lg z-50 backdrop-blur-md","aria-label":"Close",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-white opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l==="idle"&&e.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-colors duration-200 cursor-pointer relative
                            ${b?"border-blue-500 bg-blue-500/10":"border-white/20 hover:border-white/40 hover:bg-white/5"}
                        `,onDragEnter:j,onDragLeave:v,onDragOver:w,onDrop:N,onClick:()=>{var t;return(t=h.current)==null?void 0:t.click()},children:[e.jsx("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:k}),e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("p",{className:"text-sm text-center text-white/80 font-medium",children:"Drop image here"}),e.jsx("p",{className:"text-xs text-center text-white/50 mt-1",children:"or click to browse"})]}),l==="analyzing"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o&&e.jsxs("div",{className:"relative mb-6 rounded-xl overflow-hidden border border-white/10 w-full min-h-[200px] bg-black/20",children:[e.jsx("img",{src:o,alt:"Scanning",className:"w-full h-auto max-h-[300px] object-contain opacity-50 block"}),e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent animate-scanner shadow-[0_0_20px_rgba(59,130,246,0.8)]"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 animate-pulse-glow"}),e.jsx("span",{className:"text-sm text-white/70",children:"Analyzing image..."})]})]}),l==="result"&&d&&o&&e.jsx(E,{result:d,targetImage:o}),l==="error"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center mb-4 border border-red-500/30",children:e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Analysis Failed"}),e.jsx("p",{className:"text-sm text-white/50 mb-6",children:p}),e.jsx("button",{onClick:()=>s("idle"),className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-full text-sm font-medium transition-colors",children:"Try Again"})]})]})})},g=document.getElementById("root");g&&S.createRoot(g).render(e.jsx(R,{}));
